## Gong Connector for Pandora

**Status**: âœ… **PRODUCTION-READY** (extracted from RevOps Copilot)

**Category**: Conversations (Call Intelligence)
**Auth Method**: Basic Authentication (API Key)

---

### What This Connector Does

Syncs call recording data and transcripts from Gong:
- **Calls**: Metadata (date, duration, participants, direction, scope)
- **Transcripts**: Full speaker-attributed conversation text
- **Users**: Gong user list (reps, managers)

---

### Auth Setup

**API Key Format**: `accessKey:accessKeySecret`
- Get API credentials from Gong admin settings
- Format: Colon-separated key and secret
- Auth header: `Basic {base64(accessKey:accessKeySecret)}`

**Credentials**:
```typescript
{
  apiKey: "YOUR_ACCESS_KEY:YOUR_SECRET" // Or JWT
}
```

---

### Objects Synced

#### Calls
- `id`, `title`, `scheduled`, `started`, `duration`
- `primaryUserId` - Main rep on the call
- `direction` - Inbound/Outbound/Conference
- `scope` - Internal/External
- `media` - Video/Audio
- `url` - Gong recording URL
- `parties` - All participants with affiliation (Internal/External)

#### Transcripts
- `callId` - Reference to call
- `transcript` - Array of segments with speaker attribution
- Each segment: `speakerId`, `topic`, `sentences[]` with timestamps

#### Users
- `id`, `emailAddress`, `firstName`, `lastName`, `title`, `managerId`, `active`

---

### Sync Pattern

**Cursor-Based Pagination**: Gong uses cursor tokens for pagination

**Date Filtering**: Can fetch calls within date range (fromDateTime, toDateTime)

**Incremental Sync Strategy**:
```typescript
// Fetch calls since last sync
const calls = await client.getAllCalls(lastSyncDate, new Date());

// Then fetch transcripts for new calls
const callIds = calls.map(c => c.id);
const transcripts = await client.getTranscripts(callIds);
```

---

### Rate Limits

**Gong API Limits**:
- 100 requests per minute
- 10,000 requests per day

**TODO**: Add rate limiting (use `utils/retry.ts` pattern)

---

### Dependencies

**Node.js Built-ins**:
- `Buffer` - For base64 encoding
- `fetch` - HTTP requests

---

### Known Edge Cases

1. **API Key Format**: Must be `accessKey:secret` with colon separator
2. **Transcript Batching**: Can fetch up to 100 transcripts per request (pass array of callIds)
3. **Speaker Mapping**: Speaker IDs in transcripts need to be mapped to party names via `formatTranscriptAsText()`

---

### TODO for Pandora

- [ ] Add rate limiting (100 req/min)
- [ ] Implement retry logic for transient failures
- [ ] Add incremental sync with watermark storage
- [ ] Link calls to CRM deals/accounts (email-based matching)
