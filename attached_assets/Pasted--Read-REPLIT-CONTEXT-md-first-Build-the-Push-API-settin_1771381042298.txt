```
Read REPLIT_CONTEXT.md first.

Build the Push API settings UI. The backend endpoints are already live 
at /push/channels, /push/rules, and /push/log ‚Äî your job is purely 
frontend. All data comes from those APIs.

Add "Push" to the sidebar under OPERATIONS, between Playbooks and 
Insights Feed. Icon: Bell (lucide-react).

---

PAGE STRUCTURE: 3 tabs

  [Channels]  [Rules]  [Delivery Log]

Default to Channels tab on first visit, Rules tab if at least one 
channel is verified.

---

TAB 1: CHANNELS

List view:
  Card per channel showing:
    - Name + type badge (Slack / Email / Webhook)
    - Status: "Verified ‚úÖ" (green) or "Unverified ‚ö†Ô∏è" (amber)
    - Last used: "2h ago" or "Never"
    - Edit + Delete icon buttons (right side)
  
  Empty state: 
    Illustration + "No delivery channels yet"
    "Add your first channel to start pushing findings out of Pandora"
    Primary CTA: "Add Channel"

Add Channel button (top right) ‚Üí opens a right-side drawer (480px):

  Step 1 ‚Äî Select type:
    3 large option cards in a row:
      [Slack]    [Email]    [Webhook]
    Each with icon + one-line description:
      Slack: "Post to a Slack channel via webhook"
      Email: "Send HTML digest to one or more addresses"
      Webhook: "POST JSON to any HTTP endpoint"

  Step 2 ‚Äî Configure (fields change by type):
    
    SLACK:
      Channel Name (text) ‚Äî e.g. "#revenue-ops" ‚Äî for display only
      Webhook URL (text, required) ‚Äî paste from Slack app config
      Helper link: "How to create a Slack webhook ‚Üí" 
        (links to https://api.slack.com/messaging/webhooks)
    
    EMAIL:
      Recipients (tag input ‚Äî add multiple email addresses)
      From Name (text, default: "Pandora")
    
    WEBHOOK:
      Name (text) ‚Äî e.g. "Zapier Catch Hook"
      Endpoint URL (text, required)
      Secret (text, optional) ‚Äî used for HMAC signing
        Helper text: "We'll include X-Pandora-Signature header with 
        each request so you can verify it came from Pandora"
  
  Step 3 ‚Äî Test + Save:
    Channel Name field (display name in Pandora, e.g. "Rev Ops Slack")
    
    "Send Test Message" button
      ‚Üí POST /push/channels/:id/test
      ‚Üí Inline result below button:
          ‚úÖ "Message delivered successfully" (green)
          ‚ùå "Failed: [error message]" (red)
      Must succeed before Save is enabled.
    
    "Save Channel" button (disabled until test passes)

Edit flow: re-opens same drawer pre-populated. Re-test required if 
webhook URL or email changes.

---

TAB 2: RULES

List view:
  Table with columns:
    Rule Name | Channel | Trigger | Last Delivered | Status | Actions
  
  Status badges:
    Active (green pill)
    Inactive (grey pill)  
    Failed (red pill ‚Äî show error icon, hover reveals last error message)
    Auto-disabled (red pill + lock icon ‚Äî "Auto-disabled after 5 failures")
  
  Last Delivered column:
    "2h ago" or "Never" or "Empty ‚Äî no findings matched" (muted)
  
  Actions column (icon buttons):
    Toggle on/off (switch)
    ‚ñ∂ Manual trigger (play icon) ‚Üí POST /push/rules/:id/trigger
      ‚Üí Toast: "Delivery triggered ‚Äî check Log tab for results"
    Edit (pencil)
    Delete (trash, with confirm dialog)
  
  Empty state:
    "No delivery rules yet"
    "Rules tell Pandora when to send findings and where."
    CTA: "Add Rule" (disabled + tooltip if no verified channels: 
    "Add and verify a channel first")

Add Rule button ‚Üí opens a full-screen modal (not a drawer ‚Äî needs space):

  STEP INDICATOR: ‚ë† Channel ‚Üí ‚ë° Trigger ‚Üí ‚ë¢ Filters ‚Üí ‚ë£ Template ‚Üí ‚ë§ Name

  STEP 1 ‚Äî Pick a Channel:
    Dropdown of verified channels only.
    If none verified: grey state + "Verify a channel first" link to Channels tab.
    Show channel type icon next to each option.

  STEP 2 ‚Äî Configure Trigger:
    3 trigger type cards:
    
    [üìÖ Schedule]
      "Send on a repeating schedule"
      When selected, show:
        Day picker: [Mon] [Tue] [Wed] [Thu] [Fri] [Sat] [Sun] (toggleable chips)
        Time picker: hour + AM/PM dropdowns
        Timezone: dropdown (default workspace timezone)
        Preview: "Fires every Monday at 8:00 AM ET"
    
    [‚ö° After Skill Run]
      "Send immediately after a skill completes"
      When selected, show:
        Skill dropdown: list of all 16 registered skills by name
        Preview: "Fires after every Deal Scoring Model run"
    
    [üéØ Score Threshold]
      "Alert when a deal's score drops below a value"
      When selected, show:
        Threshold value: number input (default: 30, range 1-100)
        Min deal amount: number input, optional (e.g. $25,000)
        Check every: dropdown [15 min / 30 min / 1 hour / 4 hours]
        Preview: "Fires when any deal's AI Score drops below 30"

  STEP 3 ‚Äî Configure Filters:
    What findings to include in this delivery:
    
    Severity (required, at least one):
      [üî¥ Critical]  [üü° Warning]  [üîµ Info]  (toggleable, default: Critical + Warning)
    
    Skills (which skill findings to include):
      "All skills" toggle (default on)
      If off: multi-select checkboxes of skill names
    
    Min deal amount (optional):
      Number input with $ prefix. "Only include findings on deals above this amount"
      Placeholder: "No minimum"
    
    Max findings per delivery:
      Slider: 1 ‚Äî 50, default 20
      Label: "Send at most [N] findings per delivery"
    
    Preview line (dynamic, updates as user configures):
      "Will send up to 20 critical and warning findings from all skills"

  STEP 4 ‚Äî Choose Template:
    4 option cards with preview thumbnails (simple illustrated mockups):
    
    [Standard]
      "Grouped findings list with deal details"
      Best for: Slack digests, most use cases
    
    [Alert]  
      "Single-finding card with action buttons"
      Best for: Threshold triggers, urgent alerts
      (Auto-selected + locked when trigger type is Threshold)
    
    [Digest]
      "Full HTML email with metrics summary + findings"
      Best for: Email channel
      (Auto-selected + locked when channel type is Email)
    
    [Raw JSON]
      "Structured JSON payload for automation tools"
      Best for: Webhook channel, Zapier, n8n
      (Auto-selected + locked when channel type is Webhook)
    
    Auto-selection logic: if channel type or trigger type implies a 
    template, pre-select and lock it. User can still change if desired.

  STEP 5 ‚Äî Name + Save:
    Rule Name: text input
      Auto-suggested based on config, editable:
        Cron ‚Üí "Monday Pipeline Brief" (if Mon 8AM selected)
        Skill run ‚Üí "Deal Scoring Alert"
        Threshold ‚Üí "Critical Deal Score Alert"
    
    Summary card (read-only recap of all choices):
      Channel: Rev Ops Slack
      Trigger: Every Monday at 8:00 AM ET
      Filters: Critical + Warning ¬∑ All skills ¬∑ Max 20
      Template: Standard
    
    "Save Rule" button ‚Üí POST /push/rules ‚Üí success toast ‚Üí close modal
    
    "Save as inactive" checkbox (default: unchecked ‚Äî saves as active)

Edit flow: same modal pre-populated, step indicator shows current step.
User can jump between steps freely when editing (not linear).

---

TAB 3: DELIVERY LOG

Table:
  Rule Name | Triggered By | Findings Sent | Status | Time | Actions

Triggered By values:
  "Cron schedule"
  "Deal Scoring Model (skill run)"
  "Score threshold breach"
  "Manual trigger"

Status badges:
  ‚úÖ Success (green)
  ‚ùå Failed (red)
  ‚óã Empty (grey) ‚Äî "No findings matched filters"
  ‚è≠ Skipped (grey) ‚Äî rule was inactive

Filters (above table):
  Status filter: All | Success | Failed | Empty
  Rule filter: "All rules" or specific rule dropdown
  Time range: Last 24h / 7d / 30d (default 7d)

Row expand (click to expand):
  Payload preview: first 500 chars in a code block (monospace)
  Error message if failed
  Finding count breakdown: "3 critical, 5 warning"

Actions column:
  ‚Ü© Re-trigger button on Failed rows only
    ‚Üí POST /push/rules/:ruleId/trigger
    ‚Üí Adds new row to log with triggered_by: "Manual re-trigger"

Pagination: 25 rows per page, load more button at bottom.

---

COMMAND CENTER INTEGRATION (P3):

1. In Command Center header bar (right side, next to any existing controls):
   Add a bell icon with status dot:
     Green dot = last delivery < 4h ago
     Grey dot = no deliveries yet or > 24h ago
     Red dot = last delivery failed
   
   Hover tooltip: "Last sent 2h ago to Rev Ops Slack"
   Click ‚Üí opens Push settings page on Rules tab

2. In AskPandoraDrawer, at bottom of each AI response that mentions a 
   specific deal:
   Add a small link: "üîî Alert me if this deal's score changes"
   
   Clicking it:
     If at least one verified channel exists:
       Opens Add Rule modal pre-filled:
         Trigger: Score Threshold, value: current ai_score - 10
         Filter: that deal's id (add deal_id filter to filter_config if not 
         there yet, or just min_amount = deal amount as proxy)
         Template: Alert
         Name: "Score Alert ‚Äî [deal name]"
       User reviews Step 5 and saves.
     
     If no verified channel:
       Toast: "Set up a delivery channel first" with link to Push ‚Üí Channels

3. Empty state in Command Center if no rules are active:
   Subtle banner below the header:
   "üí° Push findings to Slack automatically ‚Äî Set up delivery rules ‚Üí"
   Dismissable (localStorage key: pandora_push_banner_dismissed)

---

GENERAL UI NOTES:

- Use existing component patterns from the rest of the app (same card styles, 
  same drawer/modal patterns, same toast system)
- All API calls use the existing workspace context for workspace_id
- Error states: if any /push/* endpoint returns an error, show inline 
  error message near the relevant component, not just a generic toast
- Loading states: skeleton loaders on initial tab load, spinner on 
  form submissions
- The multi-step Add Rule modal should be dismissable with Escape or X, 
  with a confirm dialog if user has filled in any fields ("Discard changes?")
- Mobile: Push settings don't need to be mobile-optimized ‚Äî this is an 
  ops configuration screen. Minimum viable at tablet width (768px+).
```